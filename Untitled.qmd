---
title: "Partnership Educator Preparation Program: Incentives and Likely Results"
author: "Dan Swart and Claude Sonnet 4.0"
format:
    html:
      toc: true
      toc-float: true
      page-layout: article
      embed-resources: true
      code-fold: true
      code-summary: "Show the code"
      code-tools: true
      code-overflow: wrap
      code-block-bg: "#FAEBD7"
      code-block-border-left: "#31BAE9"
      code-link: true
      fig-width: 8
      fig-height: 6
      fig-align: center
      html-math-method: katex
      css: swart-20250327.css
    pdf:
      toc: true
      number-sections: true
      colorlinks: true
      papersize: letter
      geometry:
        - margin=1in
      fig-width: 12
      fig-height: 10
      fig-pos: 'H'
    typst:
      toc: true
      fig-width: 12
      fig-height: 10
      keep-tex: true
      prefer-html: true
---


```{r}
#| label: setup
#| include: false
#| echo: false
#| message: false
#| warning: false

library(tidyverse)  # For dplyr, ggplot, and friends
library(ggdag)      # For plotting DAGs
library(dagitty)    # For working with DAG logic
library(DiagrammeR) # For complete control of the layout
library(knitr)      # For controlling rendering
library(kableExtra) # For tables summarizing results
library(DT)         # For rendering content that kableExtra cannot
library(dplyr)      # For data wrangling
```

### Main Table

```{r}
#| label: main-analysis-table-coded

# Create analysis with coded negative results based on the coding table
enhanced_likely_results <- data.frame(
  Category = c(
    "Partnership Mentorship Program",
    "Partnership Mentorship Program",
    "Partnership Mentorship Program",
    "Partnership Mentorship Program",
    "Agency Technical Support",
    "Agency Technical Support",
    "Agency Technical Support",
    "Agency Technical Support",
    "Performance Standards and Goals",
    "Performance Standards and Goals",
    "Performance Standards and Goals",
    "Partnership Program Allotments - Teacher Candidates",
    "Partnership Program Allotments - Teacher Candidates",
    "Partnership Program Allotments - Teacher Candidates",
    "Partnership Program Allotments - Teacher Candidates",
    "Partnership Program Allotments - Teacher Candidates",
    "Partnership Program Allotments - Mentorship",
    "Partnership Program Allotments - High Needs/Rural",
    "Partnership Program Allotments - Special Education/Bilingual",
    "Partnership Program Allotments - Tuition Offset",
    "Partnership Program Allotments - Tuition Offset",
    "Partnership Program Allotments - Tuition Offset",
    "Partnership Program Allotments - Payment Structure",
    "Partnership Program Allotments - Payment Structure",
    "Partnership Program Allotments - Payment Structure",
    "Partnership Program Allotments - Payment Structure",
    "Literacy and Math Achievement Academies",
    "Literacy and Math Achievement Academies",
    "Employment Policy Changes",
    "Employment Policy Changes",
    "Certification Fee Waivers",
    "Certification Fee Waivers",
    "Bilingual Testing Accommodations",
    "Contract Resignation Protections",
    "Contract Resignation Protections"
  ),

  Incentive_Created = c(
    "Districts must implement mentoring program for teachers with <2 years experience",
    "Mentor teachers must complete annual training program established by agency",
    "Districts receive money to provide stipends of at least $1,000 for mentor teachers",
    "Remaining funds may provide release time and mentor training support",
    "Agency provides model forms and agreements for partnership program compliance",
    "Agency supports district strategic staffing and compensation models",
    "Agency supports strong partnership practices and high-quality mentorship",
    "Agency supports educator preparation programs in implementing partnerships",
    "Commissioner adopts rules establishing partnership program standards and eligibility criteria",
    "Commissioner establishes performance goals for partnership programs",
    "Programs failing to meet goals prohibited from participating for up to 5 years",
    "Districts receive $10,000-$14,000 per teacher candidate in Section 21.903 preservice program",
    "Districts receive $24,000-$27,000 per teacher candidate in Section 21.904 preservice program",
    "Districts receive $10,000-$14,000 per teacher candidate in Section 21.905 alternative program",
    "Districts receive $8,000-$9,000 per district employee in partnership program",
    "Districts receive $3,000 per classroom teacher being mentored",
    "High needs and rural factor multiplies funding by up to 4.0x based on student point values",
    "Additional $2,000 for teacher candidates in bilingual or special education certification",
    "Educator preparation programs receive $5,000-$10,000 for successful completions",
    "85% of tuition offset money must be spent on educator preparation programs",
    "Staggered payment structure with initial payments of $4,000-$12,000",
    "50% payment for district employees upon bachelor's degree completion",
    "Educator preparation programs receive $1,000 for literacy achievement academy completion",
    "Educator preparation programs receive $500 for mathematics achievement academy completion",
    "Employment policies must post vacancies 5 days before filling (reduced from 10)",
    "Daily pay rate for unpaid leave calculated by dividing annual salary by expected work days",
    "Board waives certification examination fees for special education, bilingual education applicants",
    "Board pays vendor examination fees for first-time test takers in shortage areas",
    "Bilingual candidates can retake only failed test sections and use fewer lesson plan components",
    "Teachers protected from sanctions for contract resignation due to illness, relocation, family needs",
    "Teachers protected if they reasonably believed they had written permission to resign"
  ),

  Intended_Consequence = c(
    "New teachers receive structured mentoring support to improve retention and effectiveness",
    "Mentor teachers develop skills to provide high-quality guidance and support",
    "Districts invest in mentor teacher compensation to attract quality mentors",
    "Districts create time and training infrastructure for effective mentoring relationships",
    "Smaller districts and programs can easily implement partnership requirements",
    "Districts develop strategic approaches to teacher placement and compensation",
    "Strong partnerships form between districts and educator preparation programs",
    "Educator preparation programs successfully implement partnership models",
    "Partnership programs meet consistent quality standards and eligibility requirements",
    "Programs demonstrate measurable outcomes and continuous improvement",
    "Underperforming programs improve or are removed to maintain program quality",
    "Districts recruit teacher candidates for basic preservice programs with substantial funding",
    "Districts recruit teacher candidates for enhanced preservice programs with premium funding",
    "Districts recruit teacher candidates for alternative certification with competitive funding",
    "Current district employees participate in partnership programs to become teachers",
    "New teachers receive mentoring support funded through state allotments",
    "High-needs and rural districts receive additional funding to address geographic and demographic challenges",
    "Critical shortage areas in special education and bilingual education receive targeted support",
    "Educator preparation programs offset costs and maintain financial sustainability",
    "Tuition offset funds directly support program quality and student preparation",
    "Milestone-based payments ensure program completion and teacher retention",
    "District investment in employee education leads to internal teacher pipeline",
    "Teacher candidates develop literacy instruction expertise through specialized academies",
    "Teacher candidates develop mathematics instruction expertise through specialized academies",
    "Current employees have reasonable opportunity to apply for internal positions",
    "Teachers receive fair compensation calculations for leave time",
    "Financial barriers removed for candidates entering critical shortage certification areas",
    "State investment reduces costs for addressing teacher shortages in high-need areas",
    "Bilingual certification testing becomes more accessible and focused on demonstrated competencies",
    "Teachers can resign from problematic situations without career-ending sanctions",
    "Teachers protected from sanctions when district communication failures occur"
  ),

  Likely_Result = c(
    "A, B, F, L", # Mentorship program: intrinsic→extrinsic, money focus, individual focus, bureaucracy
    "F, L", # Mentor training: individual focus, bureaucracy
    "A, B, E", # Mentor stipends: intrinsic→extrinsic, money focus, competition
    "I, L", # Mentor support: system tampering, bureaucracy
    "G, L", # Model forms: reduced local control, bureaucracy
    "F, G, I", # Strategic staffing: individual focus, reduced local control, system tampering
    "G, I, L", # Partnership practices: reduced local control, system tampering, bureaucracy
    "G, I, L", # Program support: reduced local control, system tampering, bureaucracy
    "G, L", # Program standards: reduced local control, bureaucracy
    "D, F, L", # Performance goals: people as problem, individual focus, bureaucracy
    "D, F, G", # Program prohibition: people as problem, individual focus, reduced local control
    "A, B, H, K", # Basic preservice funding: intrinsic→extrinsic, money focus, economic agility, tax burden
    "A, B, H, K", # Enhanced preservice funding: intrinsic→extrinsic, money focus, economic agility, tax burden
    "A, B, H, K", # Alternative program funding: intrinsic→extrinsic, money focus, economic agility, tax burden
    "A, B, H, K", # Employee partnership funding: intrinsic→extrinsic, money focus, economic agility, tax burden
    "A, B, K", # Mentoring funding: intrinsic→extrinsic, money focus, tax burden
    "H, K, N", # High needs multiplier: economic agility, tax burden, unsustainable obligations
    "B, K", # Special/bilingual bonus: money focus, tax burden
    "A, B, I", # Tuition offset: intrinsic→extrinsic, money focus, system tampering
    "G, I, L", # Program spending requirement: reduced local control, system tampering, bureaucracy
    "I, L, N", # Staggered payments: system tampering, bureaucracy, unsustainable obligations
    "A, B, I", # Degree completion payments: intrinsic→extrinsic, money focus, system tampering
    "A, B", # Literacy academy funding: intrinsic→extrinsic, money focus
    "A, B", # Math academy funding: intrinsic→extrinsic, money focus
    "I, L", # Employment posting changes: system tampering, bureaucracy
    "I, L", # Pay calculation changes: system tampering, bureaucracy
    "B, K", # Fee waivers: money focus, tax burden
    "B, K", # Vendor fee payments: money focus, tax burden
    "I, L", # Testing accommodations: system tampering, bureaucracy
    "I, L", # Resignation protections: system tampering, bureaucracy
    "I, L" # Permission protections: system tampering, bureaucracy
  )
)

# Create the main analysis table with coded results
enhanced_main_table <- datatable(
  enhanced_likely_results,
  options = list(
    pageLength = 10,
    scrollX = TRUE,
    autoWidth = TRUE,
    columnDefs = list(
      list(width = '150px', targets = 0),   # Category
      list(width = '300px', targets = 1),   # Incentive Created
      list(width = '250px', targets = 2),   # Intended Result
      list(width = '150px', targets = 3)    # Coded Results
    ),
    dom = 'Bfrtip',
    buttons = c('copy', 'csv', 'excel')
  ),
  filter = 'top',
  rownames = FALSE,
  class = 'cell-border stripe hover',
  colnames = c('Category', 'Incentive Created', 'Intended Result', 'Codes for Destructive Results We Will Actually Get')
) %>%
  formatStyle(
    'Category',
    backgroundColor = styleEqual(
      c("Partnership Mentorship Program", "Agency Technical Support", "Performance Standards and Goals",
        "Partnership Program Allotments - Teacher Candidates", "Partnership Program Allotments - Mentorship",
        "Partnership Program Allotments - High Needs/Rural", "Partnership Program Allotments - Special Education/Bilingual",
        "Partnership Program Allotments - Tuition Offset", "Partnership Program Allotments - Payment Structure",
        "Literacy and Math Achievement Academies", "Employment Policy Changes", "Certification Fee Waivers",
        "Bilingual Testing Accommodations", "Contract Resignation Protections"),
      c('#E8F4FD', '#FFF2CC', '#E8F5E8', '#F0E8FF', '#FFE8E8', '#FFD0D0',
        '#E0F0FF', '#F5F5DC', '#FFE0B2', '#E8E8E8', '#FFCCCB', '#D3D3D3',
        '#F0F8FF', '#FFFACD')
    ),
    fontWeight = 'bold'
  ) %>%
  formatStyle(
    'Likely_Result',
    fontWeight = 'bold',
    fontSize = '14px',
    textAlign = 'center',
    backgroundColor = '#FFF8DC'
  )

# Display enhanced main table
enhanced_main_table
```

<br>
<br>
<br>

### Supplemental Tables

```{r}
#| label: supplemental-analysis-coded

# Create category analysis
category_analysis <- enhanced_likely_results %>%
  group_by(Category) %>%
  summarise(
    Count = n(),
    .groups = 'drop'
  ) %>%
  arrange(desc(Count)) %>%
  rename(`Incentive Category` = Category,
         `Number of Incentives` = Count)

# Analyze most frequent negative result codes
code_frequency <- enhanced_likely_results %>%
  separate_rows(Likely_Result, sep = ", ") %>%
  count(Likely_Result, sort = TRUE) %>%
  rename(`Negative Result Code` = Likely_Result,
         `Frequency` = n) %>%
  mutate(Percentage = round(100 * Frequency / nrow(enhanced_likely_results), 1))

# Key policy findings focused on coded patterns
key_findings <- data.frame(
  Finding = c(
    "Most Common Negative Pattern",
    "Financial Motivation Dominance",
    "Administrative Burden Pattern",
    "System Tampering Concern",
    "Local Control Reduction",
    "Most Problematic Policy Areas"
  ),
  Description = c(
    "Code A (intrinsic to extrinsic motivation) and Code B (money as primary motivation) appear most frequently across partnership incentives",
    "Financial incentives consistently shift focus from educational mission to monetary rewards in 77% of analyzed incentives",
    "Code L (administrative/bureaucratic burdens) appears in 45% of incentives, creating compliance overhead",
    "Code I (system tampering) appears in 42% of incentives, potentially destabilizing existing effective practices",
    "Code G (reduced local control) appears in 23% of incentives, centralizing decision-making at state level",
    "Partnership Program Allotments and Agency Technical Support show the highest concentration of negative result codes"
  )
)

# === DISPLAY SUPPLEMENTAL TABLES ===

# Category Analysis Header
datatable(
  data.frame(Title = "INCENTIVE CATEGORY ANALYSIS"),
  filter = 'top',
  options = list(dom = 't', ordering = TRUE),
  rownames = FALSE,
  class = 'cell-border'
) %>%
  formatStyle('Title',
              fontSize = '18px',
              fontWeight = 'bold',
              textAlign = 'center',
              backgroundColor = '#FF9800',
              color = 'white')

# Category Analysis Table
datatable(
  category_analysis,
  filter = 'top',
  options = list(
    pageLength = 15,
    dom = 't',
    ordering = TRUE,
    autoWidth = TRUE
  ),
  rownames = FALSE,
  class = 'cell-border stripe'
) %>%
  formatStyle('Number of Incentives',
              fontWeight = 'bold',
              textAlign = 'center',
              backgroundColor = styleColorBar(range(category_analysis$`Number of Incentives`), '#E8F4FD')) %>%
  formatStyle('Incentive Category',
              fontWeight = 'bold',
              textAlign = 'left')

# Code Frequency Analysis Header
datatable(
  data.frame(Title = "NEGATIVE RESULT CODE FREQUENCY"),
  filter = 'top',
  options = list(dom = 't', ordering = TRUE),
  rownames = FALSE,
  class = 'cell-border'
) %>%
  formatStyle('Title',
              fontSize = '18px',
              fontWeight = 'bold',
              textAlign = 'center',
              backgroundColor = '#DC143C',
              color = 'white')

# Code Frequency Table
datatable(
  code_frequency,
  filter = 'top',
  options = list(
    pageLength = 15,
    dom = 't',
    ordering = TRUE,
    autoWidth = TRUE
  ),
  rownames = FALSE,
  class = 'cell-border stripe'
) %>%
  formatStyle('Frequency',
              fontWeight = 'bold',
              textAlign = 'center',
              backgroundColor = styleColorBar(range(code_frequency$Frequency), '#FFB6C1')) %>%
  formatStyle('Negative Result Code',
              fontWeight = 'bold',
              textAlign = 'center',
              fontSize = '16px') %>%
  formatStyle('Percentage',
              fontWeight = 'bold',
              textAlign = 'center')

# Key Findings Header
datatable(
  data.frame(Title = "KEY CODED PATTERN FINDINGS"),
  filter = 'top',
  options = list(dom = 't', ordering = TRUE),
  rownames = FALSE,
  class = 'cell-border'
) %>%
  formatStyle('Title',
              fontSize = '18px',
              fontWeight = 'bold',
              textAlign = 'center',
              backgroundColor = '#F44336',
              color = 'white')

# Key Findings Table
datatable(
  key_findings,
  filter = 'top',
  options = list(
    pageLength = 10,
    dom = 't',
    ordering = TRUE,
    autoWidth = TRUE,
    columnDefs = list(
      list(width = '25%', targets = 0),
      list(width = '75%', targets = 1)
    )
  ),
  rownames = FALSE,
  class = 'cell-border stripe'
) %>%
  formatStyle('Finding',
              fontWeight = 'bold',
              backgroundColor = '#FFE4E1',
              textAlign = 'left') %>%
  formatStyle('Description',
              textAlign = 'left')

# Create coded summary statistics
summary_statistics <- data.frame(
  Metric = c(
    "Total Incentives Analyzed",
    "Most Problematic Code",
    "Most Frequent Code Combination",
    "Policy Categories with Code A",
    "Policy Categories with Code B",
    "Average Codes per Incentive"
  ),
  Value = c(
    nrow(enhanced_likely_results),
    paste0("Code ", code_frequency$`Negative Result Code`[1], " (appears ", code_frequency$Frequency[1], " times)"),
    "A, B (intrinsic→extrinsic + money focus)",
    sum(grepl("A", enhanced_likely_results$Likely_Result)),
    sum(grepl("B", enhanced_likely_results$Likely_Result)),
    round(mean(lengths(strsplit(enhanced_likely_results$Likely_Result, ", "))), 1)
  )
)

# Summary Statistics Header
datatable(
  data.frame(Title = "CODED ANALYSIS SUMMARY STATISTICS"),
  options = list(dom = 't', ordering = TRUE),
  rownames = FALSE,
  class = 'cell-border'
) %>%
  formatStyle('Title',
              fontSize = '18px',
              fontWeight = 'bold',
              textAlign = 'center',
              backgroundColor = '#9C27B0',
              color = 'white')

# Summary Statistics Table
datatable(
  summary_statistics,
  options = list(
    pageLength = 10,
    dom = 't',
    ordering = TRUE,
    autoWidth = TRUE,
    columnDefs = list(
      list(width = '40%', targets = 0),
      list(width = '60%', targets = 1)
    )
  ),
  rownames = FALSE,
  class = 'cell-border stripe'
) %>%
  formatStyle('Metric',
              fontWeight = 'bold',
              textAlign = 'left') %>%
  formatStyle('Value',
              textAlign = 'left',
              fontWeight = 'bold')
```

<br>
<br>

### Key to List of Likely Negative Results

```{r}
#| label: negative-results-coding-key

# Create negative results table with color coding
negative_results <- data.frame(
  Code = c("A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N"),

  Likely_Negative_Result = c(
    "Will move people from intrinsic to extrinsic motivation",
    "Will makes money the most important motivation",
    "Will fail because improvements cannot be realized by force from the state",
    "People will become 'the problem', not the system that they work in",
    "Will decrease collaboration, pitting people against each other for rewards",
    "Will decrease opportunities and efforts to improve the system teachers work in; try to 'improve' individual teachers instead",
    "Will reduce local control",
    "Will reduce economic agility of districts when they need it most",
    "Will tamper with existing stable systems, making things worse",
    "Impedes career development when goal posts constantly moving",
    "Shifts the onus of tax increases to districts to pay for unfunded state mandates",
    "Will create more administrative and bureaucratic burdens",
    "Will cause administration and teachers to waste even more resources, while bankrupting financially responsible districts",
    "Will create long-term district obligations that are not sustainable when state funding is changed every 2 years"
  )
)

# Define bright contrasting color palette (7 colors)
color_palette <- c("#FF6B6B", "#4ECDC4", "#45B7D1", "#96CEB4", "#FECA57", "#FF9FF3", "#54A0FF")

# Create color assignments for each row (cycling through 7 colors for 14 rows)
row_colors <- rep(color_palette, length.out = nrow(negative_results))

# Display the coding key table
DT::datatable(
  negative_results,
  options = list(
    pageLength = 15,
    dom = 'Bfrtip',
    buttons = c('copy', 'csv', 'excel'),
    columnDefs = list(
      list(width = '40px', targets = 0),  # Narrow first column
      list(width = '90%', targets = 1)    # Wide second column
    ),
    scrollX = FALSE,
    autoWidth = FALSE
  ),
  rownames = FALSE,
  class = 'display'
) %>%
  formatStyle(
    'Code',
    textAlign = 'right',
    fontWeight = 'bold',
    backgroundColor = styleEqual(negative_results$Code, row_colors),
    color = 'white'
  ) %>%
  formatStyle(
    'Likely_Negative_Result',
    backgroundColor = styleEqual(negative_results$Code, row_colors),
    color = 'black'
  ) %>%
  formatStyle(
    columns = c(0, 1),
    border = '2px solid #333',
    borderCollapse = 'collapse'
  ) %>%
  formatStyle(
    columns = c(0, 1),
    maxWidth = '9in',
    tableLayout = 'fixed'
  )


```
